---
const linksTop = [
    { href: "/", title: "Главная" },
    { href: "/archive/", title: "Архив" },
    { href: "/tagged/избранное/", title: "Избранное" },
    { href: "/tagcloud/", title: "Рубрики" },
    { href: "/kickstarter/", title: "Кикстартер" },
    { href: "/rss.xml", title: "RSS", isFilled: true },
];

const linksBottom = [
    { href: "/about/", title: "О блоге" },
    { href: "/changelog/", title: "Changelog" },
];

// Get current year for the copyright
const currentYear = new Date().getFullYear();
---

<footer class="footer">
    <ul role="list" class="list">
        {
            linksTop.map((link) => (
                <li class="item">
                    <a
                        class:list={["link primary", { filled: link.isFilled }]}
                        href={link.href}
                    >
                        {link.title}
                    </a>
                </li>
            ))
        }
    </ul>

    <ul role="list" class="list">
        {
            linksBottom.map((link) => (
                <li class="item">
                    <a class="link secondary" href={link.href}>
                        {link.title}
                    </a>
                </li>
            ))
        }
    </ul>

    <p class="description">
        Безымянная овца &mdash; нерегулярное приложение к овцепедии. Порн, картинки,
        рок-н-ролл. Хотите что-то сказать? Пишите на <a
            href="mailto:urbansheep@gmail.com"
            class="link primary">urbansheep@gmail.com</a>.
    </p>

    <p class="description" id="copyright">&copy; 2008—{currentYear}, Urbansheep</p>
</footer>

<script>
    // Client-side JavaScript to ensure the copyright year is always current
    document.addEventListener('DOMContentLoaded', () => {
        const copyrightElement = document.getElementById('copyright');
        if (copyrightElement) {
            const actualYear = new Date().getFullYear().toString();
            const copyrightText = copyrightElement.textContent || '';
            
            // Extract the year from the copyright text (assuming format "© 2008—YYYY, Urbansheep")
            const match = copyrightText.match(/\d{4}—(\d{4})/);
            
            if (match && match[1] !== actualYear) {
                // Update the year if it's different from the actual year
                const updatedText = copyrightText.replace(match[1], actualYear);
                copyrightElement.textContent = updatedText;
                console.log(`Copyright year updated to ${actualYear}`);
            }
        }
    });
</script>

<style>
    .footer {
        display: grid;
        gap: var(--spacing-base);
        margin-block: var(--spacing-lg);
        padding-top: var(--spacing-lg);
        box-shadow: 0 -6px 9px -9px var(--color-grey-400);
    }

    .description {
        padding-top: 16px;
        text-align: center;
        font-size: small;
    }

    .list {
        display: flex;
        flex-flow: row wrap;
        justify-content: center;
        list-style: none;
        line-height: var(--line-height-base);
        font-size: var(--font-size-xs);
    }

    .item::after {
        content: "•";
        padding: 0 var(--spacing-sm);
    }

    .item:last-child::after {
        content: " ";
    }

    .link {
        text-decoration: none;
    }

    .link:hover,
    .link:active {
        text-decoration: underline;
    }

    .primary {
        color: var(--theme-color-base);
    }

    .primary:hover,
    .primary:visited {
        color: var(--theme-color-base);
    }

    .secondary {
        color: var(--color-grey-400);
    }

    .secondary:hover,
    .secondary:visited {
        color: var(--color-grey-400);
    }

    .filled,
    .filled:hover,
    .filled:visited {
        padding: var(--spacing-xxs);
        background-color: var(--color-orange-600);
        color: var(--color-white);
    }
</style>
